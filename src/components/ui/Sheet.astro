---
import {
  Sheet,
  SheetTrigger,
  SheetContent,
  SheetHeader,
  SheetFooter,
  SheetTitle,
  SheetDescription,
} from "@/islands/ui/Sheet.client";

const { side = "right", trigger = "Ã–ffnen", title = "", description = "" } = Astro.props as {
  side?: "top" | "bottom" | "left" | "right";
  trigger?: string;
  title?: string;
  description?: string;
};

const hasCustomTrigger = Astro.slots.has("trigger");
const hasFooter = Astro.slots.has("footer");
---
<noscript>
  <details class="ui-glass rounded-lg p-4">
    <summary class="cursor-pointer">{hasCustomTrigger ? <slot name="trigger" /> : trigger}</summary>
    <div class="mt-3 space-y-3">
      {title && <h3 class="text-white text-lg font-semibold">{title}</h3>}
      {description && <p class="text-white/80">{description}</p>}
      <div class="text-white/80"><slot /></div>
      {hasFooter && <div class="pt-2 text-white/70"><slot name="footer" /></div>}
    </div>
  </details>
</noscript>
<Sheet client:idle>
  {hasCustomTrigger ? (
    <SheetTrigger class="rounded-md border border-white/20 bg-white/5 px-3 py-2 text-white hover:bg-white/10">
      <slot name="trigger" />
    </SheetTrigger>
  ) : (
    <SheetTrigger class="rounded-md border border-white/20 bg-white/5 px-3 py-2 text-white hover:bg-white/10">
      {trigger}
    </SheetTrigger>
  )}
  <SheetContent side={side}>
    <SheetHeader>
      {title && <SheetTitle>{title}</SheetTitle>}
      {description && <SheetDescription>{description}</SheetDescription>}
    </SheetHeader>
    <div class="py-2 text-white/80">
      <slot />
    </div>
    {hasFooter && (
      <SheetFooter>
        <slot name="footer" />
      </SheetFooter>
    )}
  </SheetContent>
</Sheet>
