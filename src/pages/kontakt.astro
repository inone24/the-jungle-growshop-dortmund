---
import meta from '../../content/seo/kontakt.json';
import PageLayout from '../layouts/PageLayout.astro';
import site from '../../content/global.json';

const rawBase = import.meta.env.BASE_URL;
const basePath = rawBase === '/' ? '' : rawBase.replace(/\/$/, '');
const withBase = (path: string) => `${basePath}${path}`;
---

<PageLayout
  title={meta.title}
  description={meta.description}
  canonical={meta.canonical}
  breadcrumb={[
    { name: 'Start', url: 'https://the-jungle-growshop-dortmund.github.io/' },
    { name: 'Kontakt', url: meta.canonical }
  ]}
>
  <section class="grid gap-8 lg:grid-cols-[380px,1fr]">
    <aside class="glass-panel rounded-2xl p-6 shadow-card">
      <h2 class="font-display text-xl text-accent-primary">Filiale Dortmund</h2>
      <address class="mt-2 not-italic text-sm text-text-dim">
        {site.address}
        <br />
        <a class="hover:text-accent-primary" href={site.phone_link}>{site.phone_display}</a>
        <br />
        {site.email}
        <br />
        {site.hours}
      </address>
      <div class="mt-4 flex gap-2">
        <a class="rounded-lg border border-white/20 px-3 py-2 text-sm text-accent-primary" href={withBase('/standort/')}>
          Route starten
        </a>
        <a class="rounded-lg bg-white px-3 py-2 text-sm text-background-dark" href={site.phone_link}>
          Jetzt anrufen
        </a>
      </div>
    <img
      class="mt-4 rounded-xl border border-white/10"
      src={withBase('/map-preview.svg')}
        loading="lazy"
        alt="Karte The Jungle Growshop Dortmund"
      />
    </aside>
    <section class="glass-panel rounded-2xl p-6 shadow-card">
      <h2 class="font-display text-xl text-text-high">Nachricht senden</h2>
      <form class="mt-4 space-y-4" method="post" action="#">
        <div>
          <label class="mb-1 block text-sm text-text-dim" for="name">Name</label>
          <input
            id="name"
            name="name"
            required
            class="w-full rounded-lg border border-white/15 bg-black/30 px-3 py-2 text-white outline-none focus:border-white/40"
          />
        </div>
        <div class="grid gap-4 md:grid-cols-2">
          <div>
            <label class="mb-1 block text-sm text-text-dim" for="email">E-Mail</label>
            <input
              id="email"
              name="email"
              type="email"
              required
              class="w-full rounded-lg border border-white/15 bg-black/30 px-3 py-2 text-white outline-none focus:border-white/40"
            />
          </div>
          <div>
            <label class="mb-1 block text-sm text-text-dim" for="phone">Telefon (optional)</label>
            <input
              id="phone"
              name="phone"
              type="tel"
              class="w-full rounded-lg border border-white/15 bg-black/30 px-3 py-2 text-white outline-none focus:border-white/40"
            />
          </div>
        </div>
        <div>
          <label class="mb-1 block text-sm text-text-dim" for="msg">Nachricht</label>
          <textarea
            id="msg"
            name="message"
            rows="5"
            class="w-full rounded-lg border border-white/15 bg-black/30 px-3 py-2 text-white outline-none focus:border-white/40"
            placeholder="Worum geht’s? Maße, Fotos, Ziel…"
          ></textarea>
        </div>
        <div class="grid gap-4 md:grid-cols-2">
          <div>
            <label class="mb-1 block text-sm text-text-dim">Datei anhängen (optional)</label>
            <input
              type="file"
              name="file"
              class="block w-full text-sm text-white/80 file:mr-3 file:rounded-md file:border-0 file:bg-white file:px-3 file:py-1.5 file:text-black file:hover:bg-white/90"
            />
          </div>
          <div>
            <label class="mb-1 block text-sm text-text-dim" for="time">Wunschtermin (optional)</label>
            <input
              id="time"
              name="preferred_time"
              type="datetime-local"
              class="w-full rounded-lg border border-white/15 bg-black/30 px-3 py-2 text-white outline-none focus:border-white/40"
            />
          </div>
        </div>
        <label class="mt-2 inline-flex items-center gap-2 text-sm text-white/80">
          <input type="checkbox" required class="size-4 rounded border-white/20 bg-black/30" />
          <span>Ich akzeptiere die Datenschutzhinweise.</span>
        </label>
        <div class="mt-4 flex gap-2">
          <button class="rounded-lg bg-white px-4 py-2 text-background-dark">Nachricht senden</button>
          <a class="rounded-lg border border-white/20 px-4 py-2 text-accent-primary" href={site.phone_link}>
            Direkt anrufen
          </a>
        </div>
      </form>
    </section>
  </section>
</PageLayout>
